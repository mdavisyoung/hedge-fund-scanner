# Stock Scanner System Documentation

## Overview

Complete automated stock scanning system with multi-factor scoring, daily batch processing, and opportunity tracking.

## Architecture

### Core Components

1. **`scanner/stock_universe.py`**
   - Defines stock lists by sector (200+ stocks)
   - Daily batch scheduling (Monday-Friday)
   - Universe summary statistics

2. **`scanner/scoring.py`**
   - Multi-factor scoring engine
   - Weighted scoring: Fundamental (40%), Technical (30%), Risk/Reward (20%), Timing (10%)
   - Letter grade system (A-F)

3. **`scanner/market_scanner.py`**
   - Main scanning orchestrator
   - Parallel processing with ThreadPoolExecutor
   - Categorizes stocks: Hot (80+), Warming (70-79), Watching (60-69)
   - Calculates trade plans (entry, stop-loss, target)

4. **`utils/storage.py`**
   - JSON file persistence
   - Manages hot/warming/watching lists
   - Trade history tracking
   - Scan progress tracking
   - Merge and deduplication logic

5. **`scanner/run_daily_scan.py`**
   - Automated daily scan entry point
   - Handles weekday vs weekend logic
   - Saturday: Re-scans hot/warming stocks
   - Sunday: No scan
   - Monday-Friday: Full batch scans

## File Structure

```
hedge_fund_app/
├── scanner/
│   ├── __init__.py
│   ├── stock_universe.py      # Stock lists and daily batches
│   ├── scoring.py              # Multi-factor scoring engine
│   ├── market_scanner.py       # Main scanner orchestrator
│   └── run_daily_scan.py      # Daily scan entry point
├── utils/
│   ├── __init__.py
│   └── storage.py             # JSON persistence layer
├── pages/
│   └── 03_Stock_Scanner.py    # Streamlit UI for scanner
└── data/                       # Generated by storage (gitignored)
    ├── hot_stocks.json
    ├── warming_stocks.json
    ├── watching_stocks.json
    ├── scan_progress.json
    └── trade_history.json
```

## Usage

### Manual Scan (Python)

```python
from scanner.market_scanner import MarketScanner

scanner = MarketScanner(max_workers=10)
results = scanner.scan_daily_batch(day_of_week=0)  # Monday

print(f"Hot: {len(results['hot'])}")
print(f"Warming: {len(results['warming'])}")
print(f"Watching: {len(results['watching'])}")
```

### Automated Daily Scan

```bash
cd hedge_fund_app
python scanner/run_daily_scan.py
```

### Streamlit UI

Navigate to "Stock Scanner" page in the app to:
- Select day of week
- Set score thresholds
- Filter by stock type
- View results with charts
- Export to CSV

## Scoring System

### Score Breakdown

**Fundamental (40% weight):**
- Growth: Revenue growth, ROE, profit margin, P/E
- Value: Low P/E, strong ROE, low debt
- Financial: ROE, P/E, dividend yield
- Cyclical: Current ratio, P/E, profit margin

**Technical (30% weight):**
- Moving averages (50-day, 200-day)
- RSI (oversold opportunities)
- Volume trends

**Risk/Reward (20% weight):**
- Distance from 52-week high
- Beta/volatility

**Timing (10% weight):**
- Recent momentum
- Market cap stability

### Grade System

- **A (85+)**: Excellent opportunity
- **B (75-84)**: Good opportunity
- **C (65-74)**: Moderate opportunity
- **D (50-64)**: Weak opportunity
- **F (<50)**: Poor opportunity

## Daily Schedule

- **Monday**: Tech & Growth stocks
- **Tuesday**: Financials & Energy
- **Wednesday**: Healthcare & Consumer
- **Thursday**: Consumer & Small caps
- **Friday**: Industrials & Small caps
- **Saturday**: Re-scan hot/warming only
- **Sunday**: No scan

## Data Storage

All scan results are stored in JSON files in the `data/` directory:

- `hot_stocks.json`: Score >= 80
- `warming_stocks.json`: Score 70-79
- `watching_stocks.json`: Score 60-69
- `scan_progress.json`: Scan metadata
- `trade_history.json`: Executed trades

## Integration with GitHub Actions

The `run_daily_scan.py` script is designed to be called by GitHub Actions for automated daily scans:

```yaml
# .github/workflows/daily_scan.yml
name: Daily Stock Scan
on:
  schedule:
    - cron: '30 9 * * 1-6'  # 9:30am ET, Mon-Sat
jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
      - run: pip install -r requirements.txt
      - run: python scanner/run_daily_scan.py
```

## Features

✅ **Parallel Processing**: Scans multiple stocks simultaneously
✅ **Smart Categorization**: Hot/Warming/Watching based on scores
✅ **Trade Plans**: Automatic entry/stop-loss/target calculation
✅ **Persistence**: JSON storage for historical tracking
✅ **Deduplication**: Merges new scans with existing data
✅ **Cold Stock Filtering**: Removes stocks below thresholds
✅ **Progress Tracking**: Weekly scan statistics

## Performance

- **Scan Speed**: ~50 stocks/minute (with 10 workers)
- **Daily Coverage**: 200+ unique stocks per week
- **Storage**: ~1-5MB per week (JSON files)

## Next Steps

1. Set up GitHub Actions for automated scans
2. Configure email/Slack notifications for hot stocks
3. Add backtesting for trade plans
4. Integrate with trading APIs for execution
5. Add portfolio tracking and P&L analysis

